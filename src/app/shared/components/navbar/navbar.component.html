<nav
  class="fixed top-0 z-50 w-full bg-white/95 backdrop-blur-md border-b border-stone-200/50 shadow-sm"
>
  <div class="max-w-350 mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <div class="shrink-0 flex items-center animate__animated animate__fadeIn">
        <a routerLink="/home" class="flex items-center cursor-pointer">
          <span
            class="text-2xl font-medium uppercase tracking-[0.25em] text-slate-950 flex items-center"
          >
            Elevate
            <span class="ml-1 text-[#0071AE] font-black">.</span>
          </span>
        </a>
      </div>

      <ul class="hidden md:flex items-center space-x-1">
        @if (isUser()) {
          @for (navLink of navLinks(); track navLink.path) {
            <li class="animate__animated animate__backInLeft">
              <a
                [routerLink]="navLink.path"
                routerLinkActive="active-link"
                class="px-4.5 text-[12px] text-slate-500 font-bold uppercase tracking-widest transition-all duration-300 hover:text-slate-950"
              >
                {{ navLink.name | translate }}
              </a>
            </li>
          }
        }
      </ul>

      <div class="flex items-center gap-6 animate__animated animate__fadeIn">
        <!-- ?===== Language Dropdown ?===== -->
        <app-dropdown-language></app-dropdown-language>

        <div class="hidden md:flex items-center gap-4.5">
          @if (!isUser()) {
            @for (authLink of authLinks(); track authLink.path) {
              <a
                [routerLink]="authLink.path"
                routerLinkActive="active-link"
                class="px-3 py-2 text-[11px] text-slate-500 font-bold uppercase tracking-widest hover:text-slate-950 transition-colors"
              >
                {{ authLink.name | translate }}
              </a>
            }
          } @else {
            <!-- ?===== User Profile ?===== -->
            <div class="relative group">
              <button class="cursor-pointer" (click)="toggleDropdownMenu()">
                <img src="/images/user.svg" alt="user" class="w-7 h-7 object-cover" />
              </button>

              <!-- ?===== User Dropdown ?===== -->
              <div
                [class]="isDropdownMenuOpened() ? 'opacity-100 visible' : 'opacity-0 invisible'"
                class="absolute -right-6 mt-3 w-44 bg-white border border-stone-200 rounded-md shadow-lg text-center"
              >
                <a
                  routerLink="/allorders"
                  class="block px-4 py-3 text-[11px] font-bold capitalize tracking-widest text-slate-950 hover:bg-stone-100"
                  (click)="closeDropdownMenu()"
                >
                  {{ 'My Orders' | translate }}
                </a>

                <a
                  routerLink="/change-my-password"
                  class="block px-4 py-3 text-[11px] font-bold capitalize tracking-widest text-slate-950 hover:bg-stone-100"
                  (click)="closeDropdownMenu()"
                >
                  {{ 'Change Password' | translate }}
                </a>

                <button
                  (click)="signOut(); closeDropdownMenu()"
                  class="w-full px-4 py-3 text-[11px] font-bold capitalize tracking-widest text-red-500 hover:bg-red-50 cursor-pointer"
                >
                  {{ 'Signout' | translate }}
                </button>
              </div>
            </div>

            <div class="relative">
              <a routerLink="/wishlist" title="Wishlist" class="relative block cursor-pointer">
                @if (count_wishlist() === 0) {
                  <i class="fa-regular fa-heart text-[22px]"></i>
                } @else {
                  <i class="fa-solid fa-heart text-[22px] text-slate-950"></i>
                }
                <span
                  class="absolute -top-3 -right-2 w-5 h-5 rounded-full bg-[#0071AE] text-white text-[12px] font-bold flex items-center justify-center"
                >
                  {{ count_wishlist() }}
                </span>
              </a>
            </div>

            <div>
              <a
                routerLink="/cart"
                class="block relative p-4 cursor-pointer rounded-base md:p-0"
                title="Your Cart"
              >
                @if (count_cart() === 0) {
                  <i class="fa-solid fa-cart-shopping text-2xl text-slate-900 opacity-50"></i>
                } @else {
                  <i class="fa-solid fa-cart-shopping text-2xl text-slate-900"></i>
                }

                <span class="sr-only">Number of Cart Items</span>
                <div
                  class="absolute flex items-center justify-center w-5 h-5 text-[12px] font-bold text-white bg-[#0071AE] rounded-full -top-3 -end-1"
                >
                  {{ count_cart() }}
                </div>
              </a>
            </div>
          }
        </div>

        <!-- ?===== Mobile Button ?===== -->
        <button (click)="toggleMenu()" class="md:hidden p-2 text-slate-950 cursor-pointer">
          <i class="fa-solid text-xl" [class]="isOpened() ? 'fa-xmark' : 'fa-bars-staggered'"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- ?===== Mobile Menu ?===== -->
  <div
    class="md:hidden overflow-hidden transition-all duration-500 ease-in-out bg-white border-t border-stone-100"
    [style.height.px]="menuHeight()"
  >
    <ul #collapseMenu class="px-6 py-8 flex flex-col gap-3">
      @if (isUser()) {
        @for (navLink of navLinks(); track navLink.path) {
          <li (click)="closeMenu()">
            <a
              [routerLink]="navLink.path"
              routerLinkActive="active-link"
              class="block px-4 py-3 text-[11px] font-black uppercase tracking-widest text-slate-500 rounded-md"
            >
              {{ navLink.name | translate }}
            </a>
          </li>
        }
      }

      <div class="pt-4 border-t border-stone-200 flex flex-col">
        @if (!isUser()) {
          @for (authLink of authLinks(); track authLink.path) {
            <a
              (click)="closeMenu()"
              [routerLink]="authLink.path"
              routerLinkActive="active-link"
              class="px-4 py-3 text-[11px] font-black uppercase tracking-widest text-slate-500"
            >
              {{ authLink.name | translate }}
            </a>
          }
        } @else {
          <a
            routerLink="/wishlist"
            routerLinkActive="active-link"
            (click)="closeMenu()"
            class="px-4 py-3 text-[11px] font-black uppercase tracking-widest text-slate-600"
          >
            {{ 'Wishlist' | translate }}
          </a>

          <a
            routerLink="/cart"
            routerLinkActive="active-link"
            (click)="closeMenu()"
            class="px-4 py-3 text-[11px] font-black uppercase tracking-widest text-slate-600"
          >
            {{ 'Cart' | translate }}
          </a>

          <a
            routerLink="/allorders"
            routerLinkActive="active-link"
            (click)="closeMenu()"
            class="px-4 py-3 text-[11px] font-black uppercase tracking-widest text-slate-600"
          >
            {{ 'My Orders' | translate }}
          </a>

          <a
            routerLink="/change-my-password"
            routerLinkActive="active-link"
            (click)="closeMenu()"
            class="px-4 py-3 text-[11px] font-black uppercase tracking-widest text-slate-600"
          >
            {{ 'Change Password' | translate }}
          </a>

          <button
            (click)="signOut()"
            (click)="closeMenu()"
            class="px-4 py-3 text-[11px] font-black uppercase tracking-widest text-red-500 cursor-pointer ltr:text-left rtl:text-right"
          >
            {{ 'Signout' | translate }}
          </button>
        }
      </div>
    </ul>
  </div>
</nav>
